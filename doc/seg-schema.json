{
  "@context": "http://qiicr.org/dcmqi/contexts/dcmqi.jsonld",
  "id" : "http://qiicr.org/schema/dcmqi/seg-schema.json",
  "$schema": "http://json-schema.org/draft-04/schema#",

  "definitions" : {
    "PN" : {
      "type" : "string",
      "maxLength" : 64
    },
    "CS" : {
      "type" : "string",
      "maxLength" : 16
    },
    "IS" : {
      "type" : "string",
      "maxLength" : 12
    },
    "LO" : {
      "type" : "string",
      "maxLength" : 64
    },
    "SH" : {
      "type" : "string",
      "maxLength" : 64
    },
    "codeSequence" : {
      "type" : "object",
      "properties" : {
        "CodeValue" : { "type" : "SH", "default" : "T-D0050"},
        "CodingSchemeDesignator" : { "type":"SH", "default" : "SRT"},
        "CodeMeaning" : { "type":"LO", "default" : "Tissue"}
      },
      "required" : ["CodeValue","CodingSchemeDesignator","CodeMeaning"]
    }
  },

  "seriesAttributes": {
    "type" : "object",
    "properties" : {

      "ContentCreatorName":
      { "allOf" :
        [{"$ref" : "#/definitions/PN"},
        {"properties" : {"default" : "Reader1"}}]
      },

      "ClinicalTrialSeriesID":
      { "allOf" :
        [{"$ref" : "#/definitions/LO"},
        {"properties" : {"default" : "Session1"}}]
      },

      "ClinicalTrialTimePointID":
      { "allOf" :
        [{"$ref" : "#/definitions/LO"},
        {"properties" : {"default" : "1"}}]
      },

      "SeriesDescription":
      { "allOf" :
        [{"$ref" : "#/definitions/LO"},
        {"properties" : {"default" : "Segmentation"}}]
      },

      "SeriesNumber":
      { "allOf" :
        [{"$ref" : "#/definitions/IS"},
        {"properties" : {"default" : "300"}}]
      },

      "InstanceNumber":
      { "allOf" :
        [{"$ref" : "#/definitions/IS"},
        {"properties" : {"default" : "1"}}]
      },

      "BodyPartExamined":
      { "allOf" :
        [{"$ref" : "#/definitions/CS"},
        {"properties" : {"default" : ""}}]
      }
    }
  },

  "segmentAttributes": {
    "type" : "array",
    "items" : {
      "type" : "object",
      "properties" : {
        "LabelID": { "type" : "number", "default" : 1},
        "SegmentDescription": { "type" : "string", "required" : false},

        "SegmentedPropertyCategoryCodeSequence": {
          "allOf" : [
            {"$ref" : "#/definitions/codeSequence"},
            {"properties" :
             {"CodeValue" : {"default": "T-D0050"},
              "CodingSchemeDesignator" : {"default": "SRT"},
              "CodeMeaning" : {"default": "Tissue"}},
            }
          ],
          "required" : true,
        },

        "SegmentedPropertyTypeCodeSequence": {
          "allOf" : [
            {"$ref" : "#/definitions/codeSequence"},
            {"properties" :
              {"CodeValue" : {"default": "T-D0050"},
              "CodingSchemeDesignator" : {"default": "SRT"},
              "CodeMeaning" : {"default": "Tissue"}},
            }
          ],
          "required" : true,
        },

        "SegmentedPropertyTypeModifierCodeSequence" : {
          "$ref" : "#/definitions/codeSequence",
          "required" : false
        },

        "AnatomicRegionSequence" : {
          "$ref" : "#/definitions/codeSequence",
          "required" : false
        },

        "AnatomicRegionModifierSequence" : {
          "$ref" : "#/definitions/codeSequence",
          "required" : false
        },

        "SegmentAlgorithmType": {
          "type" : "string",
          "enum" : ["AUTOMATIC","MANUAL","SEMIAUTOMATIC"],
          "default" : "SEMIAUTOMATIC"
        },

        "SegmentAlgorithmName": { "type" : "LO"},
        "RecommendedDisplayRGBValue": {
          "type": "array",
          "minItems" : 3,
          "maxItems" : 3,
          "items" : { "type" : "US"},
          "default" : ["128","174","128"]
        }
      }
    }
  }
}
